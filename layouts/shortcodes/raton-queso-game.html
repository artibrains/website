{{ $lang := (.Get "lang") | default .Site.Language.Lang }}

<link rel="stylesheet" href="/css/unified-demos.css">
<link rel="stylesheet" href="/css/raton-queso-game.css">

<div class="demo-wrapper">
    <div class="controls-panel">
        <h3 class="controls-panel-title  demo-mb-md">{{ if eq $lang "es" }}Controles y Configuraci√≥n{{ else }}Controls
            and Configuration{{ end }}</h3>
        <div class="control-section">
            <div class="demo-control-group">
                <label for="gridRows" class="control-label">{{ if eq $lang "es" }}Filas del tablero:{{ else }}Board
                    rows:{{ end }}</label>
                <input type="number" id="gridRows" value="3" min="2" max="10" class="demo-control-input" />
            </div>

            <div class="demo-control-group">
                <label for="gridCols" class="control-label">{{ if eq $lang "es" }}Columnas del tablero:{{ else }}Board
                    columns:{{ end }}</label>
                <input type="number" id="gridCols" value="3" min="2" max="10" class="demo-control-input" />
            </div>

            <div class="demo-control-group">
                <button onclick="reiniciar()" id="btnReiniciar" class="demo-btn demo-btn-secondary demo-btn-full-width">
                    {{ if eq $lang "es" }}üîÅ Reiniciar Tablero{{ else }}üîÅ Restart Board{{ end }}
                </button>
            </div>
        </div>

        <div class="control-section">
            <div class="demo-control-group">
                <button onclick="simularPartida()" id="btnSimular"
                    class="demo-btn demo-btn-primary demo-btn-full-width">
                    {{ if eq $lang "es" }}‚ñ∂Ô∏è Simular 1 Partida (Visual){{ else }}‚ñ∂Ô∏è Simulate 1 Game (Visual){{ end }}
                </button>
            </div>
        </div>

        <div class="control-section">
            <div class="demo-control-group">
                <label for="numSim" class="control-label">{{ if eq $lang "es" }}N√∫mero de partidas:{{ else }}Number of
                    games:{{ end }}</label>
                <input type="number" id="numSim" value="10" min="1" max="1000" class="demo-control-input" />

            </div>
            <div class="demo-control-group">
                <button onclick="simularMultiplesPartidas()" id="btnSimularMulti"
                    class="demo-btn demo-btn-secondary demo-btn-full-width">
                    {{ if eq $lang "es" }}‚ñ∂Ô∏è Simular M√∫ltiples Partidas{{ else }}‚ñ∂Ô∏è Simulate Multiple Games{{ end }}
                </button>
            </div>
        </div>

        <div class="control-section">
            <div class="demo-control-group">
                <button onclick="simularBloquesDeEntrenamiento()" id="btnSimularBloques"
                    class="demo-btn demo-btn-success demo-btn-full-width">
                    {{ if eq $lang "es" }}‚ö° Entrenar (10 bloques x 100 partidas){{ else }}‚ö° Train (10 blocks x 100
                    games){{ end }}
                </button>
            </div>
        </div>
    </div>
    <div class="demo-content-panel demo-flex-container">
        <div class="demo-chart-container">
            <h3 class="demo-chart-title">{{ if eq $lang "es" }}Juego del Rat√≥n y el Queso{{ else }}Mouse and Cheese
                Game{{ end }}</h3>
            <div class="grid" id="tablero">
                <!-- El tablero se generar√° aqu√≠ por JS -->
            </div>
        </div>

        <div class="demo-info-card">
            <div class="demo-info-card-header">{{ if eq $lang "es" }}Valores de Acci√≥n por Casilla{{ else }}Action
                Values per Square{{ end }}</div>
            <div id="estadoVasos" class="overflow-x-auto">
                <!-- La tabla de vasos se generar√° aqu√≠ por JS -->
            </div>
        </div>
    </div>
</div>

<!-- Modal de progreso -->
<div id="modal" class="demo-modal">
    <div class="demo-modal-content">
        <button onclick="cerrarModal()" class="demo-modal-close">&times;</button>
        <h2 class="demo-mb-md">{{ if eq $lang "es" }}Progreso del Entrenamiento{{ else }}Training Progress{{ end }}</h2>
        <div id="progreso" class="demo-info-card demo-mb-sm">{{ if eq $lang "es" }}Iniciando...{{ else }}Starting...{{
            end }}</div>
        <div id="progreso-detalle" class="demo-mb-md" style="font-size: 0.9em; color: var(--MAIN-TEXT-color, #666);">
        </div>
        <button onclick="cerrarModal()" class="demo-btn demo-btn-primary">{{ if eq $lang "es" }}Cerrar{{ else }}Close{{
            end }}</button>
    </div>
</div>

<script>
    // Configurar idioma para el JavaScript
    window.gameLanguage = "{{ $lang }}";
</script>
<script src="/js/raton-queso-game.js"></script>